# Configuration for m3u8-proxy behind Traefik
# Auto-generated by deploy-services.sh

http:
  middlewares:
    redirect-m3u8-to-https:
      redirectScheme:
        scheme: https
        permanent: true

  routers:
    m3u8-proxy:
      rule: "Host(`m3u8.Dannig-Optica.freeddns.org`)"
      entryPoints:
        - websecure
      service: m3u8-proxy-svc
      tls:
        certResolver: letsencrypt
      priority: 10
    
    m3u8-proxy-http:
      rule: "Host(`m3u8.Dannig-Optica.freeddns.org`)"
      entryPoints:
        - web
      middlewares:
        - redirect-m3u8-to-https
      service: m3u8-proxy-svc
      priority: 10

  services:
    m3u8-proxy-svc:
      loadBalancer:
        servers:
          - url: "http://m3u8-proxy:80"
